{"title":"初步解析地图组成（OSM）","date":"2020-04-05T03:44:08.000Z","date_formatted":{"ll":"Apr 5, 2020","L":"04/05/2020","MM-DD":"04-05"},"link":"2020/04/05/OpenLayers_1","comments":true,"tags":["OpenLayers"],"categories":["学习笔记"],"updated":"2020-04-05T06:30:18.581Z","content":"<h3 id=\"首先是一个展示简单地图的代码\">首先是一个展示简单地图的代码<a href=\"#首先是一个展示简单地图的代码\" title=\"首先是一个展示简单地图的代码\"></a></h3><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  <span class=\"comment\">// 创建地图</span></span><br><span class=\"line\"><span class=\"keyword\">new</span> ol.Map(&#123;</span><br><span class=\"line\">      <span class=\"comment\">// 设置地图图层</span></span><br><span class=\"line\">      layers: [</span><br><span class=\"line\">        <span class=\"comment\">// 创建一个使用Open Street Map地图源的瓦片图层</span></span><br><span class=\"line\">        <span class=\"keyword\">new</span> ol.layer.Tile(&#123;<span class=\"attr\">source</span>: <span class=\"keyword\">new</span> ol.source.OSM()&#125;)</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      <span class=\"comment\">// 设置显示地图的视图</span></span><br><span class=\"line\">      view: <span class=\"keyword\">new</span> ol.View(&#123;</span><br><span class=\"line\">        center: [<span class=\"number\">0</span>, <span class=\"number\">0</span>],    <span class=\"comment\">// 定义地图显示中心于经度0度，纬度0度处</span></span><br><span class=\"line\">        zoom: <span class=\"number\">2</span>            <span class=\"comment\">// 并且定义地图显示层级为2</span></span><br><span class=\"line\">      &#125;),</span><br><span class=\"line\">      <span class=\"comment\">// 让id为map的div作为地图的容器</span></span><br><span class=\"line\">      target: <span class=\"string\">'map'</span>    </span><br><span class=\"line\">  &#125;);</span><br></pre></td></tr></table></figure>\n<p>上述代码其实就相当于是新建了一个<code>ol.Map</code>的对象，然后通过一系列参数来设置这个地图对象所展示地图的格式。<br><img src=\"http://anzhihun.coding.me/ol3-primer/img/map_structure.png\" class=\"φcy\" alt=\"Open Street Map地图\"><br>&emsp;</p>\n<ul><li>参数<code>Layers</code>:<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">layers: [<span class=\"comment\">// 创建一个使用Open Street Map地图源的瓦片图层</span></span><br><span class=\"line\">            <span class=\"keyword\">new</span> ol.layer.Tile(&#123;<span class=\"attr\">source</span>: <span class=\"keyword\">new</span> ol.source.OSM()&#125;)</span><br><span class=\"line\">          ],</span><br></pre></td></tr></table></figure>\n这是一个用来设置地图图层的参数，就好像是ArcGIS里的多个图层一样可以相互叠加覆盖；<br>其中的<code>new ol.layer.Tile</code>是创建了一个瓦片图层<font color=#f14c0a>（瓦片图层是什么？）</font>。<br>&emsp;<br>而这个瓦片图层里的填充的内容是什么？是<code>ol.source.OSM</code>，也就是Open Street Map地图，一个由伦敦大学制作的开源的一个世界地图。<br>&emsp;<br>从API文档中的继承关系可以得到如下结果：<br>由<code>ol.layer.Tile</code>&lt;-<code>ol.layer.layers</code>&lt;-<code>ol.layer.Base</code>的继承关系可知，在能用<code>ol.layer.Base</code>的地方就可以用<code>ol.layer.Tile</code>，而<code>ol.layer.Base</code>为构造参数<code>layers</code>的元素类；<br>&emsp;<br>于<code>ol.layer.Tile</code>对应的地图源（数据）<code>source</code>参数应该是<code>ol.source.Tile</code>,但由于此处<code>ol.source.Tile</code>-&gt;<code>ol.source.UrlTile</code>-&gt;<code>ol.source.TileImage</code>-&gt;<code>ol.source.XYZ</code>-&gt;<code>ol.source.OSM</code>的继承关系，使得在能用<code>ol.source.Tile</code>的地方就可以用<code>ol.source.OSM</code>；<br>&emsp;</li>\n<li>参数<code>view</code>:<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">view: <span class=\"keyword\">new</span> ol.View(&#123;</span><br><span class=\"line\">            center: [<span class=\"number\">0</span>, <span class=\"number\">0</span>],    <span class=\"comment\">// 定义地图显示中心于经度0度，纬度0度处</span></span><br><span class=\"line\">            zoom: <span class=\"number\">2</span>            <span class=\"comment\">// 并且定义地图显示层级为2</span></span><br><span class=\"line\">          &#125;),</span><br></pre></td></tr></table></figure>\n这个就比较简单了，这个是用来为定义窗口显示格式的，包括地图的显示中心和地图显示层级，这两个都比较简单，当然了也可以有更多的设置花样，但这里只是以这两个为例。<br>参数<code>view</code>对应<code>ol.View</code>类。<br>&emsp;</li>\n<li>参数<code>targe</code>:<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">target: <span class=\"string\">'map'</span></span><br></pre></td></tr></table></figure>\n<code>targe</code>是用来指示地图在页面中具体哪个位置尽心显示的参数，其中<code>map</code>是用来显示地图那一个标签的<code>id</code>；<br>&emsp;<h3 id=\"写在最后\">写在最后<a href=\"#写在最后\" title=\"写在最后\"></a></h3><code>Layers</code>可以有多个，一个地图可以哟多个图层，但<code>view</code>只能有一个，一个地图中只能有一种缩放形式。<br>但尽管如此，地图上仍然很多具体功能实现代码是未知的，如<font color=#f14c0a>鼠标拖动、左上角的放大缩小按钮和右下角属性信息按钮</font>…<br>这些默认功能是通过<code>ol.Map</code>的默认参数实现的，具体可以通过API文档了解。</li>\n</ul>","prev":{"title":"万能瓦片地图加载秘籍","link":"2020/04/13/OpenLayers_7"},"next":{"title":"OpenLayers的核心组成部分","link":"2020/04/05/OpenLayers_2"},"plink":"http://yoursite.com/2020/04/05/OpenLayers_1/","toc":[{"id":"首先是一个展示简单地图的代码","title":"首先是一个展示简单地图的代码","index":"1"},{"id":"写在最后","title":"写在最后","index":"2"}],"reward":true,"copyright":{"custom":"<b>Copyright : </b>&nbsp 自由转载-非商用-禁止演绎-保持署名（CC BY-NC-ND 4.0） <br/>  <b>Link :</b> &nbsp<a href=\"https://qlqy.github.io\">https://qlqy.github.io</a>"}}