{"title":"加载静态地图","date":"2020-04-13T05:38:08.000Z","date_formatted":{"ll":"Apr 13, 2020","L":"04/13/2020","MM-DD":"04-13"},"link":"2020/04/13/OpenLayers_9","comments":true,"tags":["OpenLayers","Source And Layer"],"categories":["学习笔记"],"updated":"2020-04-13T14:34:59.945Z","content":"<h3 id=\"静态地图\">静态地图<a href=\"#静态地图\" title=\"静态地图\"></a></h3><p>代码如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 地图设置中心，设置到云龙湖</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> center = ol.proj.transform([<span class=\"number\">104.06667</span>, <span class=\"number\">30.66667</span>], <span class=\"string\">'EPSG:4326'</span>, <span class=\"string\">'EPSG:3857'</span>);</span><br><span class=\"line\"><span class=\"comment\">// 计算静态地图映射到地图上的范围，图片像素为 559*369，保持比例的情况下，把分辨率放大一些</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> extent = [center[<span class=\"number\">0</span>]- <span class=\"number\">559</span>*<span class=\"number\">1000</span>/<span class=\"number\">2</span>, center[<span class=\"number\">1</span>]<span class=\"number\">-365</span>*<span class=\"number\">1000</span>/<span class=\"number\">2</span>, center[<span class=\"number\">0</span>]+<span class=\"number\">559</span>*<span class=\"number\">1000</span>/<span class=\"number\">2</span>, center[<span class=\"number\">1</span>]+<span class=\"number\">365</span>*<span class=\"number\">1000</span>/<span class=\"number\">2</span>];</span><br></pre></td></tr></table></figure>\n<p>上述两个变量的建立即为加载静态地图的核心代码，其中的<code>center</code>是设置显示框的中心为在静态图范围内，不然的话，可能会由于缩放级别的问题，找不到该图；<br>而<code>extent</code>则是这个静态地图的范围，也是地理范围，令二者一致，也就是在显示框中在地图显示中心周围 559*369范围内显示静态地图。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//创建地图</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> map = <span class=\"keyword\">new</span> ol.Map(&#123;</span><br><span class=\"line\">    view: <span class=\"keyword\">new</span> ol.View(&#123; </span><br><span class=\"line\">        center: center,</span><br><span class=\"line\">        zoom: <span class=\"number\">7</span></span><br><span class=\"line\">    &#125;),</span><br><span class=\"line\">    target: <span class=\"string\">'map'</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 加载熊猫基地静态地图层</span></span><br><span class=\"line\">map.addLayer(<span class=\"keyword\">new</span> ol.layer.Image(&#123;</span><br><span class=\"line\">    source: <span class=\"keyword\">new</span> ol.source.ImageStatic(&#123;</span><br><span class=\"line\">        url: <span class=\"string\">'../img/pandaBase.jpg'</span>, <span class=\"comment\">// 熊猫基地地图</span></span><br><span class=\"line\">        imageExtent: extent     <span class=\"comment\">// 映射到地图的范围</span></span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">&#125;));</span><br></pre></td></tr></table></figure>\n","prev":{"title":"加载离线瓦片地图","link":"2020/04/13/OpenLayers_8"},"next":{"title":"初步解析地图组成（OSM）","link":"2020/04/05/OpenLayers_1"},"plink":"http://yoursite.com/2020/04/13/OpenLayers_9/","toc":[{"id":"静态地图","title":"静态地图","index":"1"}],"reward":true,"copyright":{"custom":"<b>Copyright : </b>&nbsp 自由转载-非商用-禁止演绎-保持署名（CC BY-NC-ND 4.0） <br/>  <b>Link :</b> &nbsp<a href=\"https://qlqy.github.io\">https://qlqy.github.io</a>"}}